getwd()
setwd("./apendices/")
library(doMC)
library(ggpubr)
library(imager)
library(cowplot)
library(raster)
library(gridExtra)
library(ggplot2)
library(readr)
library(purrr)
library(stringr)
library(tidyr)
library(plyr)
library(dplyr)
select <- dplyr::select
# dados
df_sitios_greg <- read_csv("./resultados_e_SI/df_Greg_SitesAnoAmostragem.csv") |>
mutate(year_bestProxy = as.numeric(year_bestProxy))
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE, include = TRUE, warning = FALSE,cache = TRUE,message=FALSE,eval=FALSE)
library(doMC)
library(raster)
library(bbmle)
library(gridExtra)
library(ggplot2)
library(readr)
library(purrr)
library(stringr)
library(tidyr)
library(plyr)
library(dplyr)
select <- dplyr::select
getwd()
df_dados <- read_csv(file = "./dados/df_dados_disponiveis.csv")
df_dados
names(df_dados)
df_dados <- read_csv(file = "./dados/df_dados_disponiveis.csv") |>
mutate(year_bestProxy = ifelse(is.na(year_data),year,year_data)) |>
select(SiteCode,effort_ha,year_bestProxy,Ntotal,S_obs)
df_dados
df_dados <- read_csv(file = "./dados/df_dados_disponiveis.csv") |>
mutate(year_bestProxy = ifelse(is.na(year_data),year,year_data),
tif.path = paste0("./dados/paisagens_padronizadas/",SiteCode,".tif")) |>
select(SiteCode,effort_ha,year_bestProxy,Ntotal,S_obs)
df_dados
df_dados <- read_csv(file = "./dados/df_dados_disponiveis.csv") |>
mutate(year_bestProxy = ifelse(is.na(year_data),year,year_data),
tif.path = paste0("./dados/paisagens_padronizadas/",SiteCode,".tif")) |>
select(SiteCode,effort_ha,year_bestProxy,Ntotal,S_obs,tif.path)
df_dados
df_dados$tif.path[1]
r_full <- raster(df_dados$tif.path[1])
df_dados <- read_csv(file = "./dados/df_dados_disponiveis.csv") |>
mutate(year_bestProxy = ifelse(is.na(year_data),year,year_data),
tif.path = list.files(path="./dados/paisagens_padronizadas/",pattern = ".tif",full.names=T)) |>
select(SiteCode,effort_ha,year_bestProxy,Ntotal,S_obs,tif.path)
list.files(path="./dados/paisagens_padronizadas/",pattern = ".tif",full.names=T)
list.files(path="./dados/paisagens_mapbiomas6_padronizadas/",pattern = ".tif",full.names=T)
df_dados <- read_csv(file = "./dados/df_dados_disponiveis.csv") |>
mutate(year_bestProxy = ifelse(is.na(year_data),year,year_data),
tif.path = list.files(path="./dados/paisagens_mapbiomas6_padronizadas/",pattern = ".tif",full.names=T)) |>
select(SiteCode,effort_ha,year_bestProxy,Ntotal,S_obs,tif.path)
df_dados
df_dados$tif.path[1]
r_full <- raster(df_dados$tif.path[1])
r_full
m_teste <- as.matrix(r_full)
m_teste
m_teste |> dim
m_teste |> dim()
m_teste <- raster::as.matrix(r_full)
m_teste |> dim()
m_teste |> dim()
m_teste
image(m_teste)
m_teste==1
m_teste==1 |> dim()
m_teste==1 |> length()
class(m_teste==1)
dim(m_teste==1)
m_teste[m_teste==1]
m_teste[m_teste==1]
length(m_teste[m_teste==1])
length(m_teste[m_teste==1])/length(m_teste)
# calculo da proporção de cobertura vegetal
p_i <- length(m_teste[m_teste==1])/length(m_teste)
p_i
m_full <- raster::as.matrix(r_full)
dim(m_full)
max(df_dados$effort_ha)
sqrt(max(df_dados$effort_ha)*0.01)
seq(sqrt(max(df_dados$effort_ha)*0.01),11,by = 0.1)
seq(sqrt(max(df_dados$effort_ha)*0.01),11,by = 0.1) |> length()
max(df_dados$effort_ha)
sqrt(max(df_dados$effort_ha)*0.01)
seq(sqrt(max(df_dados$effort_ha)*0.01),11,by = 0.1)
c(seq(sqrt(max(df_dados$effort_ha)*0.01),11,by = 0.1),11)
# leitura do raster e conversão em matrix
r_full <- raster(df_dados$tif.path[1]) |> raster::as.matrix()
nrow(m_full)/2
m_full
raio_km <- 11
# 1 pixel = 30x30m
# raio = metade do lado da paisagem local
raio_pixels <- round(raio_km * 1000 / 30)
raio_pixels
dim(m_full)
dim(m_full)/2
dim(m_full)
dim(m_full) * 30/1000
dim(m_full) * 15/1000
dim(m_full) * 30/1000
dim(m_full)
10/742
m_full[366:376,366:376] |> dim()
m_full[367:376,367:376] |> dim()
m_full |> nrow()/2
raio_max <- m_full |> nrow()/2
i <- 1
v_add <- 5+2*(i-1)
v_add
m_i <- m_full[(raio_max+1-v_add):(raio_max+v_add),
(raio_max+1-v_add):(raio_max+v_add),]
(raio_max+1-v_add)
(raio_max+v_add)
m_i <- m_full[(raio_max+1-v_add):(raio_max+v_add),
(raio_max+1-v_add):(raio_max+v_add)]
m_i |> dim
m_i |> dim()
df_p <- data.frame(SiteCode = NA, p = NA, lado_km = NA)
df_p
df_p[,2:3]
df_p[i,2:3] <- c(length(m_i[m_i==1])/length(m_i),
nrow(m_i) * 1000/30)
df_p
nrow(m_i)
nrow(m_i) * 30/1000
df_p[i,2:3] <- c(length(m_i[m_i==1])/length(m_i),
nrow(m_i) * 30/1000)
df_p
